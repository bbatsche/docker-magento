#!/bin/bash

[[ -z "${BIN_DIR}" ]] && BIN_DIR="$(dirname "$0")"

"${BIN_DIR}/composer" require magento/live-search

"${BIN_DIR}/magento" module:disable \
    Magento_Elasticsearch, \
    Magento_Elasticsearch6, \
    Magento_Elasticsearch7, \
    Magento_ElasticsearchCatalogPermissions, \
    Magento_AdvancedSearch, \
    Magento_InventoryElasticsearch

"${BIN_DIR}/magento" setup:upgrade

echo You may now disable the opensearch entries in compose.yaml \& compose.healthcheck.yaml and restart the containers.
